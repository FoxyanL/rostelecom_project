# ТЕХНИЧЕСКОЕ ЗАДАНИЕ

## Децентрализованная система голосования на базе блокчейна Ethereum

---

## 1. Общие сведения

### 1.1 Наименование проекта

**Децентрализованная система голосования на базе блокчейна Ethereum**

### 1.2 Основание для разработки

Проект выполняется в рамках финального задания по дисциплине, посвящённой разработке распределённых приложений и смарт-контрактов с использованием технологии блокчейн.

### 1.3 Цель проекта

Целью проекта является разработка распределённого приложения (DApp), обеспечивающего прозрачное, безопасное и децентрализованное голосование с использованием смарт-контрактов в сети Ethereum.

---

## 2. Назначение и область применения

### 2.1 Назначение системы

Система предназначена для проведения голосований, в которых:

- каждый участник может проголосовать только один раз;
- результаты голосования хранятся в блокчейне;
- отсутствует централизованный сервер управления.

### 2.2 Область применения

- учебные и демонстрационные проекты;
- студенческие опросы;
- децентрализованные сообщества;
- примеры использования смарт-контрактов в Web3-приложениях.

---

## 3. Требования к системе

### 3.1 Функциональные требования

#### 3.1.1 Требования к смарт-контракту

Смарт-контракт должен обеспечивать:

- хранение списка вариантов голосования;
- регистрацию факта голосования пользователя;
- запрет повторного голосования с одного адреса;
- подсчёт количества голосов за каждый вариант;
- доступ к данным о результатах голосования.

**Реализовано:**

Контракт `Voting.sol` включает все требуемые функции:
- `vote(uint256 optionIndex)` — голосование
- `getOptionsCount()` — получение количества вариантов
- `getOption(uint256 index)` — получение данных варианта
- `getAllOptions()` — получение всех результатов
- `checkIfVoted(address voter)` — проверка статуса голосования
- Mapping `hasVoted` для запрета повторного голосования
- События `Voted` и `VotingCreated` для прозрачности

#### 3.1.2 Требования к пользовательскому интерфейсу

Пользовательский интерфейс должен обеспечивать:

- подключение Ethereum-кошелька (MetaMask);
- отображение доступных вариантов голосования;
- возможность проголосовать за выбранный вариант;
- отображение результатов голосования в реальном времени.

**Реализовано:**

Интерфейс в `packages/nextjs/app/page.tsx`:
- Интеграция с MetaMask через RainbowKit
- Отображение всех вариантов голосования
- Кнопки для голосования с проверкой статуса
- Автоматическое обновление результатов каждые 3 секунды
- Прогресс-бары для визуализации результатов
- Блок статистики с общими показателями

### 3.2 Нефункциональные требования

#### 3.2.1 Требования к безопасности

- все данные голосования должны храниться в блокчейне;
- невозможность изменения результатов после голосования;
- защита от повторного голосования.

**Реализовано:**

Меры безопасности:
- Все данные в блокчейне через переменные состояния
- Иммутабельность через require-проверки
- `mapping(address => bool) hasVoted` для защиты от повторного голосования
- Валидация всех входных параметров
- События для аудита действий

#### 3.2.2 Требования к надёжности

- корректная работа при отключении фронтенда;
- сохранность данных при перезапуске узла сети;
- независимость от централизованных серверов.

**Реализовано:**

Надёжность обеспечена:
- Смарт-контракт работает независимо от фронтенда
- Данные персистентны в блокчейне
- Полностью децентрализованная архитектура
- Отсутствие зависимости от внешних API

#### 3.2.3 Требования к производительности

- отклик пользовательского интерфейса не более 1–2 секунд при локальной сети;
- минимальное количество транзакций для голосования.

**Реализовано:**

Производительность:
- Быстрый отклик в локальной сети Hardhat
- Одна транзакция на голос
- Оптимизированные view-функции без gas
- Batch-запросы данных через `getAllOptions()`

#### 3.2.4 Требования к совместимости

- поддержка современных браузеров;
- совместимость с Ethereum-кошельками (MetaMask);
- корректная работа в локальной сети Hardhat.

**Реализовано:**

Совместимость:
- Next.js с поддержкой всех современных браузеров
- RainbowKit для работы с MetaMask и другими кошельками
- Полная поддержка локальной сети Hardhat
- Responsive-дизайн с Tailwind CSS

---

## 4. Архитектура системы

### 4.1 Общая архитектура

Система представляет собой распределённое приложение, состоящее из следующих компонентов:

- смарт-контракт в сети Ethereum;
- фронтенд-приложение на базе Next.js;
- локальная тестовая сеть Hardhat.

**Реализовано:**

Архитектура полностью соответствует требованиям:
```
├── packages/hardhat/        # Блокчейн-слой
│   ├── contracts/
│   │   └── Voting.sol      # Смарт-контракт
│   ├── test/
│   │   └── Voting.test.ts  # Тесты
│   └── deploy/             # Деплой-скрипты
│
└── packages/nextjs/        # Фронтенд-слой
    ├── app/
    │   └── page.tsx        # UI голосования
    └── hooks/              # Web3 хуки
```

### 4.2 Технологический стек

- Solidity — язык разработки смарт-контрактов;
- Hardhat — среда разработки и тестирования;
- Scaffold-ETH 2 — шаблон DApp;
- Next.js — фронтенд-фреймворк;
- TypeScript — типизация;
- Wagmi / Viem — взаимодействие с блокчейном;
- Node.js, Yarn — среда выполнения и управления зависимостями.

**Реализовано:**

Все технологии используются согласно ТЗ

---

## 5. Требования к программной реализации

### 5.1 Требования к структуре проекта

Проект должен быть организован в виде монорепозитория и содержать:

- папку `packages/hardhat` для смарт-контрактов и тестов;
- папку `packages/nextjs` для пользовательского интерфейса;
- скрипты деплоя и тестирования.

**Реализовано:**

Структура монорепозитория полностью соответствует требованиям

### 5.2 Требования к тестированию

- наличие модульных тестов для смарт-контракта;
- проверка корректности голосования;
- проверка запрета повторного голосования.

**Реализовано:**

Полный набор тестов в `Voting.test.ts`:

1. **Развёртывание:**
   - Инициализация вариантов
   - Эмиссия событий
   - Валидация пустых данных

2. **Голосование:**
   - Успешное голосование
   - Запрет повторного голосования
   - Валидация индексов
   - Подсчёт голосов нескольких пользователей

3. **Получение результатов:**
   - Получение всех вариантов
   - Получение конкретного варианта
   - Обработка ошибок

4. **Безопасность:**
   - Проверка mapping hasVoted
   - Иммутабельность результатов

---

## 6. Требования к документации

В состав документации должны входить:

- репозиторий проекта на GitHub;
- файл README.md с инструкцией по запуску;
- описание архитектуры и используемых технологий;
- техническое задание (настоящий документ).

**Реализовано:**

Полная документация:
- README.md с подробной инструкцией по запуску
- Описание всех функций контракта
- Руководство по тестированию
- Настоящее техническое задание
- Комментарии в коде (NatSpec)

---

## 7. Требования к развёртыванию

### 7.1 Локальное развёртывание

Система должна поддерживать развёртывание в локальной тестовой сети Hardhat:

- запуск локальной сети;
- деплой смарт-контракта;
- запуск фронтенд-приложения.

**Реализовано:**

Простой процесс развёртывания:

```bash
# 1. Запуск локальной сети
yarn chain

# 2. Деплой контракта
yarn deploy

# 3. Запуск фронтенда
yarn start
```

### 7.2 Средства развёртывания

- Node.js версии не ниже 18.17;
- Yarn;
- Git;
- локальная сеть Hardhat.

**Реализовано:**

Все требования к средствам развёртывания документированы в README.md

---

## 8. Критерии приёмки

Проект считается выполненным, если:

| № | Критерий | Статус |
|---|----------|--------|
| 1 | Смарт-контракт успешно компилируется и развёртывается | ✅ Выполнено |
| 2 | Пользователь может проголосовать через веб-интерфейс | ✅ Выполнено |
| 3 | Повторное голосование невозможно | ✅ Выполнено |
| 4 | Результаты голосования отображаются корректно | ✅ Выполнено |
| 5 | Проект запускается согласно инструкции | ✅ Выполнено |
| 6 | Присутствуют модульные тесты | ✅ Выполнено |
| 7 | Документация полная и актуальная | ✅ Выполнено |

---

## 9. Дополнительные улучшения

Помимо базовых требований ТЗ, в проект внедрены:

### 9.1 Расширенная функциональность контракта

- Функция `getAllOptions()` для получения всех результатов одним запросом
- События `Voted` и `VotingCreated` для логирования
- Валидация пустых названий вариантов
- NatSpec документация для всех функций

### 9.2 Улучшенный пользовательский интерфейс

- Современный дизайн с Tailwind CSS
- Прогресс-бары для визуализации результатов
- Автоматическое обновление данных
- Информационные блоки о статусе пользователя
- Адаптивный дизайн для мобильных устройств
- Блок статистики с общими показателями
- Информационная секция о проекте

### 9.3 Расширенное тестирование

- 15+ тест-кейсов
- Проверка всех сценариев использования
- Тестирование граничных случаев
- Проверка безопасности
- Использование TypeScript для типобезопасности

---

## 10. Заключение

**Проект полностью соответствует всем требованиям технического задания и готов к приёмке.**

Все функциональные и нефункциональные требования выполнены, система протестирована, документация актуальна.

### Ключевые достижения:

1. Полнофункциональный смарт-контракт с защитой от повторного голосования
2. Современный и удобный пользовательский интерфейс
3. Комплексное тестовое покрытие
4. Подробная документация на русском языке
5. Готовность к развёртыванию и демонстрации


